(function(e){function t(t){for(var a,n,o=t[0],l=t[1],c=t[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&p.push(r[n][0]),r[n]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],a=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(a=!1)}a&&(i.splice(t--,1),e=n(n.s=s[0]))}return e}var a={},r={app:0},i=[];function n(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=a,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=l;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"034f":function(e,t,s){"use strict";var a=s("8a23"),r=s.n(a);r.a},"048c":function(e,t,s){},"050e":function(e,t,s){},"0c58":function(e,t,s){e.exports=s.p+"img/logo.3c45df44.png"},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},14:function(e,t){},15:function(e,t){},2:function(e,t){},"258b":function(e,t,s){},3:function(e,t){},3868:function(e,t,s){"use strict";var a=s("8d32"),r=s.n(a);r.a},4:function(e,t){},"49a6":function(e,t,s){},5:function(e,t){},"56d7":function(e,t,s){"use strict";s.r(t);s("e623"),s("e379"),s("5dc8"),s("37e1");var a=s("2b0e"),r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-content",[s("router-view")],1)},i=[],n={name:"App",data:function(){return{}}},o=n,l=(s("034f"),s("2877")),c=s("6544"),d=s.n(c),u=s("a75b"),p=Object(l["a"])(o,r,i,!1,null,null,null),f=p.exports;d()(p,{VContent:u["a"]});var h=s("f3091");a["a"].use(h["a"]);var m=new h["a"]({}),v=(s("d1e78"),s("8c4f")),g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{attrs:{id:"sandbox"}},[s("v-app-bar",{attrs:{color:"#2B5563",dark:"",app:""}},[s("v-avatar",{staticClass:"mr-5",attrs:{color:"teal",size:"48"}},[s("img",{staticClass:"bounceIn",attrs:{src:"/images/logo.png",alt:"logo"}})]),s("v-toolbar-title",[e._v("Meter Link")]),s("v-layout",{staticClass:"hidden-sm-and-down",attrs:{row:"","pb-2":""}},[s("v-flex",{staticClass:"bounceIn",attrs:{md1:""}},[s("h1",{staticStyle:{"margin-top":"25px"}},[e._v(e._s(e.fullname))])]),s("v-flex",[s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img1 bounceIn",attrs:{src:"/images/routes.png",alt:"logo"},on:{click:function(t){return e.menu("home","Route Assignment")}}},a))]}}])},[s("span",[e._v("Route Assignment")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img1 bounceIn",attrs:{src:"/images/map.png",alt:"logo"},on:{click:function(t){return e.menu("incident","Incident Report")}}},a))]}}])},[s("span",[e._v("Incident Report")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img1 bounceIn",attrs:{src:"/images/meter.png",alt:"logo"},on:{click:function(t){return e.menu("reading","Meter Readings")}}},a))]}}])},[s("span",[e._v("Meter Readings")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img1 bounceIn",attrs:{src:"/images/install.png",alt:"logo"},on:{click:function(t){return e.menu("installations","Installations")}}},a))]}}])},[s("span",[e._v("Installations")])]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img1 bounceIn",attrs:{src:"/images/settings.png",alt:"logo"},on:{click:function(t){return e.menu("settings","Settings")}}},a))]}}])},[s("span",[e._v("Settings")])])],1),s("v-spacer"),s("h2",{staticClass:"bounceIn menuSelected"},[e._v(e._s(e.meunSelected))]),s("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("img",e._g({staticClass:"img3 bounceIn",attrs:{src:"/images/exit.png",alt:"logo"},on:{click:e.logout}},a))]}}])},[s("span",[e._v("Log Out")])])],1)],1),s(e.page,{tag:"component"})],1)},b=[],w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{"ma-5":""}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"5"}},[s("v-card",{staticClass:"mb-5",attrs:{"max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Route List "),s("v-spacer"),s("v-btn",{attrs:{color:"green",dark:""},on:{click:e.loadRoutes}},[e._v("Load New Routes")])],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left",attrs:{width:"10%"}},[e._v("ID")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("Name")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("AssignedTo")]),s("th",{staticClass:"text-left"},[e._v("Action")])])]),s("tbody",e._l(e.routes,(function(t){return s("tr",{key:t.routeId},[s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(" "+e._s(t.routeId)+" ")]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.route))]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.userName))]),s("td",[s("v-layout",{attrs:{row:""}},[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.deleteItem(t)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1),7!=t.status?s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.openAssigner(t)}}},[s("v-icon",{attrs:{color:"blue"}},[e._v("account_circle")])],1):e._e()],1)],1)])})),0)]},proxy:!0}])})],1)],1),s("v-col",{attrs:{cols:"12",md:"7"}},[s("v-card",{staticClass:"mb-12",attrs:{hover:"","max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Routes : "+e._s(e.selectedItem)+" Address List "),s("v-spacer")],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("firstName")]),s("th",{staticClass:"text-left"},[e._v("address")]),s("th",{staticClass:"text-left"},[e._v("meterNumber")]),s("th",{staticClass:"text-left"},[e._v("Action")])])]),s("tbody",e._l(e.addressData,(function(t){return s("tr",{key:t.item},[s("td",[e._v(" "+e._s(t.clientName)+" ")]),s("td",[e._v(" "+e._s(t.address)+" ")]),s("td",[e._v(e._s(t.meterNumber))]),s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.deleteItem(t)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)])})),0)]},proxy:!0}])})],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.dialogEditItem,callback:function(t){e.dialogEditItem=t},expression:"dialogEditItem"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" User Selection ")]),s("v-flex",{attrs:{"ma-3":""}},[s("v-combobox",{attrs:{items:e.users,"item-text":"userName","hide-selected":"",label:"Select user type"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),s("v-btn",{attrs:{large:"",block:"",color:"primary"},on:{click:e.assign}},[e._v("Assign User to route")])],1),s("v-card-text")],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogMap,callback:function(t){e.dialogMap=t},expression:"dialogMap"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"#2B5563"}},[s("v-toolbar-title",[e._v("Addresses on routes")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.dialogMap=!1}}},[e._v("Close")])],1)],1),s("v-flex",{attrs:{xs12:"",lg12:""}},[s("div",{staticClass:"map"},[s("MapScreen",{attrs:{mapData:e.geoData}})],1)])],1)],1),s("v-dialog",{attrs:{width:"700"},model:{value:e.dialogUpload,callback:function(t){e.dialogUpload=t},expression:"dialogUpload"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[s("span",{staticClass:"headline"},[e._v("Upload CSV File")]),s("v-spacer"),s("v-btn",{staticClass:"white--text",attrs:{loading:e.loading3,disabled:e.loading3,color:"primary"},on:{click:function(t){return e.$refs.doc.click()}}},[e._v(" Upload : "+e._s(e.fileName)+" "),s("v-icon",{attrs:{right:"",dark:""}},[e._v("cloud_upload")])],1),s("input",{ref:"doc",staticStyle:{display:"none"},attrs:{type:"file",accept:".csv"},on:{change:e.uploader}})],1),s("v-flex",{attrs:{"pa-3":""}},[s("v-text-field",{attrs:{label:"Route Name",outlined:"",type:"text"},model:{value:e.routeData.route,callback:function(t){e.$set(e.routeData,"route",t)},expression:"routeData.route"}}),s("v-text-field",{attrs:{label:"Route ID",outlined:"",type:"number"},model:{value:e.routeData.routeId,callback:function(t){e.$set(e.routeData,"routeId",t)},expression:"routeData.routeId"}}),s("v-simple-table",{attrs:{"fixed-header":"",height:"200"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("firstName")]),s("th",{staticClass:"text-left"},[e._v("address")]),s("th",{staticClass:"text-left"},[e._v("meterNumber")])])]),s("tbody",e._l(e.csvData,(function(t){return s("tr",{key:t.item},[s("td",[e._v(" "+e._s(t.clientName)+" ")]),s("td",[e._v(" "+e._s(t.address)+" ")]),s("td",[e._v(e._s(t.meterNumber))])])})),0)]},proxy:!0}])}),s("br"),s("v-btn",{staticClass:"mb-5",attrs:{large:"",block:"",color:"primary"},on:{click:e.save}},[e._v("Save")]),s("v-btn",{attrs:{large:"",block:"",dark:"",color:"red"},on:{click:function(t){e.dialogUpload=!1}}},[e._v("Cancel")])],1),s("v-card-text")],1)],1)],1)},y=[],x=(s("c975"),s("a434"),s("b0c0"),s("d3b7"),s("96cf"),s("1da1")),_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"adminmap"},[s("l-map",{attrs:{zoom:e.zoom,center:e.center}},[s("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.address,(function(t,a){return s("l-marker",{key:a,attrs:{"lat-lng":e.latlong(t.lat,t.log)}},[s("l-popup",{attrs:{content:"Customer : <b>"+t.clientName+"</b><br>Address &nbsp;&nbsp;: <b>"+t.address+" </b><br>Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <b>"+new Date(t.dateTime).toLocaleString("en-GB",{timeZone:"UTC"})+"</b>"}}),s("l-icon",{attrs:{"icon-size":e.iconSize,"icon-url":e.icon}})],1)}))],2)],1)},k=[],I=s("2699"),R=s("a40a"),U=s("4e2b6"),A=s("fbba"),C=s("f60f"),N=s("0c58"),S=s.n(N),D={components:{LMap:I["a"],LTileLayer:R["a"],LMarker:U["a"],LIcon:A["a"],LPopup:C["a"]},props:["mapData"],data:function(){return{zoom:8,center:L.latLng(-17.7954816,31.0222848),url:"https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=130626f3c0ed4ca5865efcbbbe4334f8",attribution:'&copy; <a href="http://grebles.co.zw/copyright">Grebles Solutions</a>',marker:L.latLng(-17.7954816,31.0222848),icon:S.a,iconSize:[32,32],address:[]}},created:function(){this.address=this.mapData},watch:{mapData:{handler:function(e){e&&(this.address=this.mapData,console.log(this.address))},deep:!0}},methods:{latlong:function(e,t){return L.latLng(e,t)}}},V=D,T=(s("b771"),Object(l["a"])(V,_,k,!1,null,"2e1ce604",null)),j=T.exports,$=s("2317"),O=s.n($),E={components:{MapScreen:j},data:function(){return{e1:0,select:null,geoData:null,selectedUser:null,dialogUpload:!1,dialogMap:!1,dialogEditItem:!1,users:[],dialogloader:!1,nodeApi:"",selectedRoute:null,selectedItem:null,routes:[],addressData:[],editedIndex:-1,defaultrouteData:{route:"",routeId:0,createdBy:"",address:""},routeData:{route:"",routeId:0,createdBy:"",address:""},csvData:[],loader:null,loading3:!1,files:"",fileName:""}},watch:{dialogUpload:function(e){this.csvData=[],this.fileName="",this.files=""},dialogEditItem:function(e){e?this.getUsers():this.editedIndex=-1}},created:function(){this.getRoutes()},methods:{csvReader:function(e){return new Promise((function(t,s){var a=new FileReader,r="";a.onload=function(e){r=e.target.result,t(r)},a.onerror=function(e){s(e)},a.readAsText(e)}))},uploader:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=null,a=t.target.files[0],e.next=4,this.csvReader(a);case 4:this.files=e.sent,this.fileName=a.name,""!=this.files&&(r=s("4d7c"),r().fromString(this.files).then((function(e){i.csvData=e,i.$swal.fire({type:"success",title:"Document Uploaded!!",text:"You document was uploaded successfully",showConfirmButton:!0})})).catch((function(e){i.$swal.fire({type:"error",title:"Can not convert csv!!",text:e})})));case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),save:function(){var e=this;if(""==this.routeData.route)this.$swal.fire("Route Adding Failed","Please enter a valid route name","error");else if(""==this.routeData.routeId)this.$swal.fire("Route Adding Failed","Please enter a valid route id","error");else if(0==this.csvData.length)this.$swal.fire("Route Adding Failed","Please upload a valid route list","error");else{this.dialogloader=!0,this.routeData.createdBy=this.$session.get("user").userdetails.id,this.routeData.address=JSON.stringify(this.csvData);var t=this.$jwt.sign(this.routeData,"meterlink@@11",{expiresIn:15}),s={token:this.$session.get("user").token,payload:t};O.a.post(this.nodeApi+"/addRoute",s).subscribe((function(t){t.data.affectedRows&&(e.dialogloader=!1,e.dialogUpload=!1,e.routeData=e.defaultrouteData,e.getRoutes(),e.$swal.fire({type:"success",title:"Route Saved",text:"Route was saved successfully"})),t.data.affectedRows||(e.dialogloader=!1,e.$swal.fire({type:"error",title:"User Saving Failed",text:t.data.message}))}),(function(e){return console.log(e)}))}},selectedRowItem:function(e){this.selectedItem=e.route,this.addressData=JSON.parse(e.address)},openAssigner:function(e){this.selectedRoute=e,this.selectedRoute.address=JSON.stringify(this.selectedRoute.address),this.dialogEditItem=!0},getUsers:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUsers",{headers:t}).subscribe((function(e){s.users=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assign:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selectedRoute.createdBy=this.$session.get("user").userdetails.id,this.selectedRoute.assignTo=this.selectedUser.id,this.selectedRoute.status=7,this.selectedRoute.statusApp="red",this.selectedRoute.icon="av-timer",t=this.selectedRoute.id,delete this.selectedRoute.createdAt,delete this.selectedRoute.updatedAt,delete this.selectedRoute.id,delete this.selectedRoute.userName,s={stack:this.selectedRoute,stack_id:t,assignTo:this.selectedRoute.assignTo},this.dialogloader=!0,a=this.$jwt.sign(s,"meterlink@@11",{expiresIn:15}),r={token:this.$session.get("user").token,payload:a},e.next=16,O.a.post(this.nodeApi+"/assignRoute",r).subscribe((function(e){e.data.affectedRows&&(i.dialogloader=!1,i.getRoutes(),i.dialogEditItem=!1,i.$swal.fire({type:"success",title:"Route Assignment",text:"Route Assignment was successfully"})),e.data.affectedRows||(i.dialogloader=!1,i.$swal.fire({type:"error",title:"Route Assignment Failed",text:e.data.message}))}),(function(e){return console.log(e)}));case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRoutes:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllRoutes",{headers:t}).subscribe((function(e){s.routes=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadRoutes:function(){this.dialogUpload=!0},updateItem:function(){this.editedIndex>-1?(Object.assign(this.itemData[this.editedIndex],this.newItem),this.dialogEditItem=!1):(this.itemData.push({quantity:this.newItem.quantity,item:this.newItem.item,unitprice:this.newItem.unitprice}),this.dialogEditItem=!1)},editItem:function(e){this.editedIndex=this.itemData.indexOf(e),this.newItem=Object.assign({},e),this.dialogEditItem=!0},deleteItem:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t){var s,a,r,i,n,o,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogloader=!0,s={routeId:t.routeId},a=this.$jwt.sign(s,"meterlink@@11",{expiresIn:15}),r={token:this.$session.get("user").token,payload:a},e.next=6,O.a.post(this.nodeApi+"/deleteRoute",r).subscribe((function(e){if(e.data.affectedRows){l.dialogloader=!1;var s=l.routes.indexOf(t);l.routes.splice(s,1),l.$swal.fire({type:"success",title:"Route Deleted",text:"Route Assignment was successfully"})}e.data.affectedRows||(l.dialogloader=!1,l.$swal.fire({type:"error",title:"Route Deleting Failed",text:e.data.message}))}),(function(e){return console.log(e)}));case 6:if(0==t.assignTo){e.next=13;break}return console.log(t),i={route:t.route},n=this.$jwt.sign(i,"meterlink@@11",{expiresIn:15}),o={token:this.$session.get("user").token,payload:n},e.next=13,O.a.post(this.nodeApi+"/deleteRouteAssigned",o).subscribe((function(e){console.log(e.data)}),(function(e){return console.log(e)}));case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),mapScreen:function(e){this.geoData=e,this.dialogMap=!0}}},P=E,B=(s("c34f"),s("8336")),M=s("b0af"),z=s("99d9"),F=s("62ad"),J=s("2b5d"),G=s("169a"),W=s("0e8f"),q=s("132d"),X=s("a722"),Y=s("8e36"),Z=s("0fd9b"),H=s("1f4f"),K=s("2fa4"),Q=s("8654"),ee=s("71d9"),te=s("2a7f"),se=Object(l["a"])(P,w,y,!1,null,"ce03f3a0",null),ae=se.exports;d()(se,{VBtn:B["a"],VCard:M["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:F["a"],VCombobox:J["a"],VDialog:G["a"],VFlex:W["a"],VIcon:q["a"],VLayout:X["a"],VProgressLinear:Y["a"],VRow:Z["a"],VSimpleTable:H["a"],VSpacer:K["a"],VTextField:Q["a"],VToolbar:ee["a"],VToolbarItems:te["a"],VToolbarTitle:te["b"]});var re,ie,ne=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{"ma-5":""}},[s("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[s("v-stepper-header",[s("v-stepper-step",{attrs:{editable:e.editable,step:"1"}},[e._v("User Administration")]),s("v-divider"),s("v-stepper-step",{attrs:{editable:e.editable,step:"2"}},[e._v("No Access Administration")])],1),s("v-stepper-items",[s("v-stepper-content",{attrs:{step:"1"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersUsers,items:e.users,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",[e._v("Users List")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[e._v("New User")])]}}]),model:{value:e.dialogUsers,callback:function(t){e.dialogUsers=t},expression:"dialogUsers"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),s("v-flex",{attrs:{"pa-3":""}},[s("v-combobox",{attrs:{items:e.userTypeData,"item-text":"name","hide-selected":"",label:"Select user type"},model:{value:e.editedUser.userType,callback:function(t){e.$set(e.editedUser,"userType",t)},expression:"editedUser.userType"}}),s("v-text-field",{attrs:{label:"Fist Name",outlined:"",type:"text"},model:{value:e.editedUser.firstName,callback:function(t){e.$set(e.editedUser,"firstName",t)},expression:"editedUser.firstName"}}),s("v-text-field",{attrs:{label:"Last Name",outlined:"",type:"text"},model:{value:e.editedUser.lastName,callback:function(t){e.$set(e.editedUser,"lastName",t)},expression:"editedUser.lastName"}}),s("v-text-field",{attrs:{label:"UserName",outlined:"",type:"text"},model:{value:e.editedUser.userName,callback:function(t){e.$set(e.editedUser,"userName",t)},expression:"editedUser.userName"}}),-1===e.editedIndex?s("v-text-field",{attrs:{label:"Password",outlined:"",type:"password"},model:{value:e.editedUser.password,callback:function(t){e.$set(e.editedUser,"password",t)},expression:"editedUser.password"}}):e._e(),-1===e.editedIndex?s("v-text-field",{attrs:{label:"Confirm Password",outlined:"",type:"password"},model:{value:e.confirm_password,callback:function(t){e.confirm_password=t},expression:"confirm_password"}}):e._e(),-1===e.editedIndex?s("v-btn",{staticClass:"mb-5",attrs:{large:"",block:"",color:"primary"},on:{click:e.save}},[e._v("Save")]):e._e(),-1!==e.editedIndex?s("v-btn",{staticClass:"mb-5",attrs:{large:"",block:"",dark:"",color:"green"},on:{click:e.update}},[e._v("Update")]):e._e(),s("v-btn",{attrs:{large:"",block:"",dark:"",color:"red"},on:{click:e.close}},[e._v("Cancel")])],1),s("v-card-text")],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[s("v-layout",{attrs:{row:""}},[s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[s("v-icon",e._g(e._b({staticClass:"mr-3",attrs:{color:"green"},on:{click:function(t){return e.editUser(a)}}},"v-icon",i,!1),r),[e._v(" edit ")])]}}],null,!0)},[s("span",[e._v("Edit User")])]),s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[s("v-icon",e._g(e._b({staticClass:"mr-3",attrs:{color:"red"},on:{click:function(t){return e.passwordReset(1,a.id)}}},"v-icon",i,!1),r),[e._v(" vpn_key ")])]}}],null,!0)},[s("span",[e._v("Reset Password")])]),s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,i=t.attrs;return[s("v-icon",e._g(e._b({staticClass:"mr-3",attrs:{color:"orange"},on:{click:function(t){return e.appPasswordReset(1,a.id)}}},"v-icon",i,!1),r),[e._v(" vpn_key ")])]}}],null,!0)},[s("span",[e._v("Reset App Password")])])],1)]}},{key:"no-data",fn:function(){return[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1),s("v-stepper-content",{attrs:{step:"2"}},[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headersAccess,items:e.noAccessData,"sort-by":"calories"},scopedSlots:e._u([{key:"top",fn:function(){return[s("v-toolbar",{attrs:{flat:"",color:"white"}},[s("v-toolbar-title",[e._v("No Access List")]),s("v-divider",{staticClass:"mx-4",attrs:{inset:"",vertical:""}}),s("v-spacer"),s("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on;return[s("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},a),[e._v("New No Access")])]}}]),model:{value:e.dialogNoAccess,callback:function(t){e.dialogNoAccess=t},expression:"dialogNoAccess"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[s("span",{staticClass:"headline"},[e._v(e._s(e.formTitle2))])]),s("v-flex",{attrs:{"pa-3":""}},[s("v-text-field",{attrs:{label:"No Access Name",outlined:"",type:"text"},model:{value:e.noAccess.description,callback:function(t){e.$set(e.noAccess,"description",t)},expression:"noAccess.description"}}),-1===e.editedIndex2?s("v-btn",{staticClass:"mb-5",attrs:{large:"",block:"",color:"primary"},on:{click:e.saveNoAccess}},[e._v("Save")]):e._e(),-1!==e.editedIndex2?s("v-btn",{staticClass:"mb-5",attrs:{large:"",block:"",dark:"",color:"green"},on:{click:e.updateNoAccess}},[e._v("Update")]):e._e(),s("v-btn",{attrs:{large:"",block:"",dark:"",color:"red"},on:{click:e.close}},[e._v("Cancel")])],1)],1)],1)],1)]},proxy:!0},{key:"item.action",fn:function(t){var a=t.item;return[s("v-layout",{attrs:{row:""}},[s("v-icon",{staticClass:"mr-5",attrs:{color:"blue"},on:{click:function(t){return e.editUser2(a)}}},[e._v(" edit ")])],1)]}},{key:"no-data",fn:function(){return[s("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0}])})],1)],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},oe=[],le=(s("a4d3"),s("e01a"),{data:function(){return{dialog:!1,dialogloader:!1,status:!1,truer:!0,noAccessData:[],falser:!1,e1:0,is_company:!1,apiURL:"http://localhost:81/clearplus/api",nodeApi:"",editable:!0,dialogUsers:!1,dialogNoAccess:!1,headersAccess:[{text:"Code ID",align:"left",sortable:!1,value:"id"},{text:"Description",value:"description"},{text:"Actions",value:"action",sortable:!1}],headersUsers:[{text:"User ID",align:"left",sortable:!1,value:"id"},{text:"User Name",align:"left",sortable:!1,value:"userName"},{text:"firstName",value:"firstName"},{text:"lastName",value:"lastName"},{text:"User Type",value:"userType"},{text:"Actions",value:"action",sortable:!1}],users:[],clients:[],editedIndex:-1,editedIndex2:-1,noAccess:{description:""},defaultnoAccess:{description:""},editedUser:{userName:"",firstName:"",lastName:"",userType:"",status:"",password:""},defaultUser:{userName:"",firstName:"",lastName:"",userType:"",status:"",password:""},confirm_password:"",userTypeData:[]}},computed:{formTitle:function(){return-1===this.editedIndex?"New User":"Edit User"},formTitle2:function(){return-1===this.editedIndex2?"New No Access":"Edit No Access"}},watch:{dialogUsers:function(e){e||this.close()},dialogNoAccess:function(e){e||this.close()}},created:function(){this.initialize()},methods:{initialize:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getUserTypes();case 2:return e.next=4,this.getUsers();case 4:return e.next=6,this.getNoAccess();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getStatus:function(e){return 1==e||"true"==e?"Active":0==e||"false"==e?"In-Active":void 0},getUserTypes:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUserTypes",{headers:t}).subscribe((function(e){s.userTypeData=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getUsers:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUsers",{headers:t}).subscribe((function(e){s.users=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getNoAccess:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllNoAccess",{headers:t}).subscribe((function(e){s.noAccessData=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editUser:function(e){this.editedIndex=this.users.indexOf(e),this.editedUser=Object.assign({},e),this.dialogUsers=!0},editUser2:function(e){this.editedIndex2=this.noAccessData.indexOf(e),this.noAccess=Object.assign({},e),this.dialogNoAccess=!0},deleteUser:function(e){var t=this.users.indexOf(e);confirm("Are you sure you want to delete this item?")&&this.users.splice(t,1)},close:function(){var e=this;this.dialogUsers=!1,this.dialogNoAccess=!1,this.dialogloader=!1,setTimeout((function(){e.editedUser=Object.assign({},e.defaultItem),e.noAccess=Object.assign({},e.defaultnoAccess),e.editedIndex=-1,e.editedIndex2=-1}),300)},save:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editedUser.userType?this.editedUser.firstName&&this.editedUser.lastName?this.editedUser.userName?this.editedUser.password?this.editedUser.password!=this.confirm_password?this.$swal.fire("Password Error","Your 2 passwords do not match.","error"):(t=this.editedUser.userType.id,this.dialogloader=!0,s=this.$jwt.sign(this.editedUser.password,"meterlink@@11"),this.editedUser.password=s,this.editedUser.passwordApp="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjoiMDAwMCJ9.ah-ibXJDwm8q6d2WR0ScwJB5ThnnpuWhCGOQF_YoFJg",this.editedUser.status=2,this.editedUser.userType=t,this.editedUser.createdBy=this.$session.get("user").userdetails.id,a=this.$jwt.sign(this.editedUser,"meterlink@@11",{expiresIn:15}),r={token:this.$session.get("user").token,payload:a},O.a.post(this.nodeApi+"/addUser",r).subscribe((function(e){e.data.affectedRows&&(i.close(),i.editedUser=i.defaultUser,i.getUsers(),i.$swal.fire("User Saved","User was saved successfully","success")),e.data.affectedRows||(i.dialogloader=!1,i.$swal.fire("User Saving Failed","".concat(e.data.message),"error"))}),(function(e){return console.log(e)}))):this.$swal.fire("Password Error","Please enter vaild password.","error"):this.$swal.fire("User Name Error","Please enter vaild username.","error"):this.$swal.fire("Name Error","Please enter Firt Name and Last Name.","error"):this.$swal.fire("User type Error","Please select a user type.","error");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),update:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.editedUser.userType?this.editedUser.firstName&&this.editedUser.lastName?this.editedUser.userName?(this.dialogloader=!0,t=this.editedUser.id,this.editedUser.userType.id?(s=this.editedUser.userType.id,this.editedUser.userType=s):("Admin"==this.editedUser.userType&&(this.editedUser.userType=1),"Meter Reader"==this.editedUser.userType&&(this.editedUser.userType=2),"Plumber"==this.editedUser.userType&&(this.editedUser.userType=3)),"active"==this.editedUser.status&&(this.editedUser.status=1),"in-active"==this.editedUser.status&&(this.editedUser.status=2),delete this.editedUser.id,delete this.editedUser.iat,delete this.editedUser.exp,a=this.$jwt.sign(this.editedUser,"meterlink@@11",{expiresIn:15}),r={token:this.$session.get("user").token,payload:a},O.a.put(this.nodeApi+"/updateUser/"+t,r).subscribe((function(e){e.data.affectedRows&&(i.close(),i.editedUser=i.defaultUser,i.getUsers(),i.$swal.fire("User Update","User was updated successfully","success")),e.data.affectedRows||i.$swal.fire("User Update Failed","".concat(e.data.message),"error")}),(function(e){return console.log(e)}))):this.$swal.fire("Name Error","Please enter vaild username.","error"):this.$swal.fire("Name Error","Please enter Firt Name and Last Name.","error"):this.$swal.fire("User type Error","Please select a user type.","error");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),saveNoAccess:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.noAccess.description?(this.dialogloader=!0,t=this.$jwt.sign(this.noAccess,"meterlink@@11",{expiresIn:15}),s={token:this.$session.get("user").token,payload:t},O.a.post(this.nodeApi+"/addNoAccess",s).subscribe((function(e){e.data.affectedRows&&(a.close(),a.editedUser=a.defaultUser,a.getNoAccess(),a.$swal.fire("NoAccess Added","NoAccess was added successfully","success")),e.data.affectedRows||(a.dialogloader=!1,a.$swal.fire("User Saving Failed","".concat(e.data.message),"error"))}),(function(e){return console.log(e)}))):this.$swal.fire("No Access Error","Please enter a no access description.","error");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateNoAccess:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.noAccess.description?(this.dialogloader=!0,t=this.noAccess.id,delete this.noAccess.id,delete this.noAccess.iat,delete this.noAccess.exp,s=this.$jwt.sign(this.noAccess,"meterlink@@11",{expiresIn:15}),a={token:this.$session.get("user").token,payload:s},O.a.put(this.nodeApi+"/updateNoAccess/"+t,a).subscribe((function(e){e.data.affectedRows&&(r.close(),r.noAccess=r.defaultnoAccess,r.getNoAccess(),r.$swal.fire("NoAccess Updated","NoAccess was updated successfully","success")),e.data.affectedRows||r.$swal.fire("User Saving Failed","".concat(e.data.message),"error")}),(function(e){return console.log(e)}))):this.$swal.fire("No Access Error","Please enter a no access description.","error");case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),userActivation:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t,s){var a,r,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={status:t},r=this.$jwt.sign(a,"meterlink@@11",{expiresIn:15}),i={token:this.$session.get("user").token,payload:r},O.a.put(this.nodeApi+"/updateUser/"+s,i).subscribe((function(e){e.data.affectedRows&&(n.initialize(),console.log("Success")),e.data.affectedRows||console.log(e.data.message)}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),passwordReset:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t,s){var a,r,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={password:"eyJhbGciOiJIUzI1NiJ9.MTIzNA.2033UUIOKN4Jh_nHjbb1-_ppomxZ0-2gMxSdzqw3vZ8"},r=this.$jwt.sign(a,"meterlink@@11",{expiresIn:15}),i={token:this.$session.get("user").token,payload:r},O.a.put(this.nodeApi+"/adminPasswordReset/"+s,i).subscribe((function(e){e.data.affectedRows&&(n.initialize(),n.$swal.fire("User Admin Password Update",'User was updated successfully and has been set to the default "1234"',"success")),e.data.affectedRows||console.log(e.data.message)}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}(),appPasswordReset:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(t,s){var a,r,i,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a={passwordApp:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlsb2FkIjoiMDAwMCJ9.ah-ibXJDwm8q6d2WR0ScwJB5ThnnpuWhCGOQF_YoFJg"},r=this.$jwt.sign(a,"meterlink@@11",{expiresIn:15}),i={token:this.$session.get("user").token,payload:r},O.a.put(this.nodeApi+"/adminPasswordResetApp/"+s,i).subscribe((function(e){e.data.affectedRows&&(n.initialize(),n.$swal.fire("User App Password Update",'User was updated successfully and has been set to the default "0000"',"success")),e.data.affectedRows||console.log(e.data.message)}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(t,s){return e.apply(this,arguments)}return t}()}}),ce=le,de=(s("b607"),s("8fea")),ue=s("ce7e"),pe=s("7e85"),fe=s("e516"),he=s("9c54"),me=s("56a4"),ve=s("3a2f"),ge=Object(l["a"])(ce,ne,oe,!1,null,"ea5ea1c4",null),be=ge.exports;d()(ge,{VBtn:B["a"],VCard:M["a"],VCardText:z["b"],VCardTitle:z["c"],VCombobox:J["a"],VDataTable:de["a"],VDialog:G["a"],VDivider:ue["a"],VFlex:W["a"],VIcon:q["a"],VLayout:X["a"],VProgressLinear:Y["a"],VSpacer:K["a"],VStepper:pe["a"],VStepperContent:fe["a"],VStepperHeader:he["a"],VStepperItems:he["b"],VStepperStep:me["a"],VTextField:Q["a"],VToolbar:ee["a"],VToolbarTitle:te["b"],VTooltip:ve["a"]});var we={},ye=Object(l["a"])(we,re,ie,!1,null,null,null),xe=ye.exports,_e=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{"ma-5":""}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"5"}},[s("v-card",{staticClass:"mb-5",attrs:{"max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Assigned Routes "),s("v-spacer"),s("v-btn",{attrs:{color:"green",dark:""},on:{click:function(t){e.dialogEditItem=!0}}},[e._v("Select User")])],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("ID")]),s("th",{staticClass:"text-left"},[e._v("Name")]),s("th",{staticClass:"text-left"},[e._v("Status")]),s("th",{staticClass:"text-left"},[e._v("Action")])])]),s("tbody",e._l(e.routes,(function(t){return s("tr",{key:t.routeId},[s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(" "+e._s(t.routeId)+" ")]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.route))]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.name))]),s("td",["completed"==t.name?s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.mapScreen(t)}}},[s("v-icon",{attrs:{color:"green"}},[e._v("location_on")])],1):e._e(),"completed"==t.name?s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on;return[s("v-btn",{attrs:{icon:""}},[s("export-excel",{staticClass:"btn btn-default",attrs:{data:e.addressData,fields:e.json_fields,title:e.json_title,worksheet:"Route_Worksheet",name:"FinishedRoutes_"+t.routeId+".xls"}},[s("v-icon",e._g({attrs:{color:"green darken-2"}},r),[e._v("library_add")])],1)],1)]}}],null,!0)},[s("span",[e._v("Billing Export")])]):e._e(),"completed"==t.name?s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on;return[s("v-btn",{attrs:{icon:""}},[s("export-excel",{staticClass:"btn btn-default",attrs:{data:e.addressData,fields:e.json_fields2,title:e.json_title,worksheet:"Route_Worksheet",name:"GIS_"+t.routeId+".xls"}},[s("v-icon",e._g({attrs:{color:"red darken-2"}},r),[e._v("library_add")])],1)],1)]}}],null,!0)},[s("span",[e._v("GIS Export")])]):e._e(),"completed"==t.name?s("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on;return[s("v-btn",{attrs:{icon:""}},[s("export-excel",{staticClass:"btn btn-default",attrs:{data:e.addressData,fields:e.json_fields2,title:e.json_title2,worksheet:"Route_Worksheet",name:"Route_"+t.routeId+".csv"}},[s("v-icon",e._g({attrs:{color:"purple darken-2"}},r),[e._v("library_add")])],1)],1)]}}],null,!0)},[s("span",[e._v("Route Export")])]):e._e()],1)])})),0)]},proxy:!0}])})],1)],1),s("v-col",{attrs:{cols:"12",md:"7"}},[s("v-card",{staticClass:"mb-12",attrs:{hover:"","max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Routes : "+e._s(e.selectedItem)+" Address List "),s("v-spacer")],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("meterNumber")]),s("th",{staticClass:"text-left"},[e._v("Previous Reading")]),s("th",{staticClass:"text-left"},[e._v("Reading")]),s("th",{staticClass:"text-left"},[e._v("No-Access")]),s("th",{staticClass:"text-left"},[e._v("Notes")]),s("th",{staticClass:"text-left",attrs:{width:"20%"}},[e._v("Date Time")])])]),s("tbody",e._l(e.addressData,(function(t){return s("tr",{key:t.item},[s("td",[e._v(e._s(t.meterNumber))]),s("td",[e._v(e._s(t.lastReading))]),s("td",[e._v(e._s(t.reading))]),s("td",[e._v(e._s(t.noAccess))]),s("td",[e._v(e._s(t.notes))]),s("td",[e._v(e._s(e.dateChecker(t.dateTime)))])])})),0)]},proxy:!0}])})],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.dialogEditItem,callback:function(t){e.dialogEditItem=t},expression:"dialogEditItem"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" User Selection ")]),s("v-flex",{attrs:{"ma-3":""}},[s("v-combobox",{attrs:{items:e.users,"item-text":"userName","hide-selected":"",label:"Select user type"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),s("v-btn",{attrs:{large:"",block:"",color:"primary"},on:{click:e.assign}},[e._v("Assign User to route")])],1),s("v-card-text")],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogMap,callback:function(t){e.dialogMap=t},expression:"dialogMap"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"#2B5563"}},[s("v-toolbar-title",[e._v("Addresses on routes")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.dialogMap=!1}}},[e._v("Close")])],1)],1),s("v-flex",{attrs:{xs12:"",lg12:""}},[s("div",{staticClass:"map"},[s("MapScreen",{attrs:{mapData:e.geoData}})],1)])],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},ke=[],Ie=(s("a9e3"),{components:{MapScreen:j},data:function(){return{e1:0,select:null,selectedUser:null,geoData:null,dialogEditItem:!1,users:[],dialogMap:!1,newrows:[],dialogloader:!1,nodeApi:"",selectedRoute:null,selectedItem:null,routes:[],addressData:[],editedIndex:-1,json_title:[],json_title2:[],json_fields2:{lat:"lat",log:"log",icon:"icon",notes:"notes",status:"status",address:"address",reading:"reading",lastReading:"lastReading",dateTime:{field:"dateTime",callback:function(e){return e?"".concat(new Date(e).toLocaleString("en-GB")):" "}},noAccess:"noAccess",clientName:"clientName",meterNumber:"meterNumber",meterLocation:"meterLocation"},json_fields:{meterNumber:"meterNumber",reading:"reading",noAccess:"noAccess"}}},watch:{dialogEditItem:function(e){e?this.getUsers():this.editedIndex=-1}},created:function(){},methods:{dateChecker:function(e){var t=new Date(e).toLocaleString("en-GB");return"Invalid Date"==t?"":t},mapScreen:function(e){var t=JSON.parse(e.address);this.addressData=JSON.parse(t),this.geoData=this.addressData,this.dialogMap=!0},selectedRowItem:function(e){this.selectedItem=e.route;var t=JSON.parse(e.address);this.addressData=JSON.parse(t),this.json_title=["METERLINK - FINISHED ROUTE","Route : ".concat(this.selectedItem),"Route ID : ".concat(e.routeId),"Downloaded Date : ".concat(new Date(Number(e.downloadAt)).toLocaleString("en-GB")),"Updated Date : ".concat(new Date(Number(e.uploadedAt)).toLocaleString("en-GB")),"Uploaded By : ".concat(e.userName)," "]},openAssigner:function(e){this.selectedRoute=e,this.selectedRoute.address=JSON.stringify(this.selectedRoute.address),this.dialogEditItem=!0},getUsers:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUsers",{headers:t}).subscribe((function(e){s.users=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assign:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getRoutes(),this.dialogEditItem=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRoutes:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},s=this.$jwt.sign({assignTo:this.selectedUser.id},"meterlink@@11",{expiresIn:15}),a={payload:s},O.a.post(this.nodeApi+"/getAllRoutesByUser",a,{headers:t}).subscribe((function(e){var t=r.$jwt.decode(e.data.token,{complete:!0});r.routes=t.payload.rows}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadRoutes:function(){this.getRoutes()},updateItem:function(){this.editedIndex>-1?(Object.assign(this.itemData[this.editedIndex],this.newItem),this.dialogEditItem=!1):(this.itemData.push({quantity:this.newItem.quantity,item:this.newItem.item,unitprice:this.newItem.unitprice}),this.dialogEditItem=!1)},editItem:function(e){this.editedIndex=this.itemData.indexOf(e),this.newItem=Object.assign({},e),this.dialogEditItem=!0},deleteItem:function(e){var t=this.routes.indexOf(e);this.routes.splice(t,1)}}}),Re=Ie,Ue=(s("ad07"),Object(l["a"])(Re,_e,ke,!1,null,"271d9296",null)),Ae=Ue.exports;d()(Ue,{VBtn:B["a"],VCard:M["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:F["a"],VCombobox:J["a"],VDialog:G["a"],VFlex:W["a"],VIcon:q["a"],VProgressLinear:Y["a"],VRow:Z["a"],VSimpleTable:H["a"],VSpacer:K["a"],VToolbar:ee["a"],VToolbarItems:te["a"],VToolbarTitle:te["b"],VTooltip:ve["a"]});var Ce=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{"ma-5":""}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-card",{staticClass:"mb-5",attrs:{"max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Assigned Route List "),s("v-spacer"),s("v-btn",{attrs:{color:"green",dark:""},on:{click:function(t){e.dialogEditItem=!0}}},[e._v("Select User")])],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left",attrs:{width:"10%"}},[e._v("ID")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("Name")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("Status")]),s("th",{staticClass:"text-left"},[e._v("Action")])])]),s("tbody",e._l(e.routes,(function(t){return s("tr",{key:t.routeId},[s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(" "+e._s(t.routeId)+" ")]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.route))]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.name))]),s("td",[s("v-layout",{attrs:{row:""}},[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.deleteItem(t)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)],1)])})),0)]},proxy:!0}])})],1)],1),s("v-col",{attrs:{cols:"12",md:"8"}},[s("v-card",{staticClass:"mb-12",attrs:{hover:"","max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Routes : "+e._s(e.selectedItem)+" Address List "),s("v-spacer")],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("meterNumber")]),s("th",{staticClass:"text-left"},[e._v("Reading")]),s("th",{staticClass:"text-left"},[e._v("No-Access")]),s("th",{staticClass:"text-left"},[e._v("Notes")]),s("th",{staticClass:"text-left"},[e._v("location")]),s("th",{staticClass:"text-left",attrs:{width:"20%"}},[e._v("Date Time")])])]),s("tbody",e._l(e.addressData,(function(t){return s("tr",{key:t.item},[s("td",[e._v(e._s(t.meterNumber))]),s("td",[e._v(e._s(t.reading))]),s("td",[e._v(e._s(t.noAccess))]),s("td",[e._v(e._s(t.notes))]),s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.deleteItem(t)}}},[s("v-icon",{attrs:{color:"green"}},[e._v("location_on")])],1)],1),s("td",[e._v(e._s(Date(t.dateTime)))])])})),0)]},proxy:!0}])})],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.dialogEditItem,callback:function(t){e.dialogEditItem=t},expression:"dialogEditItem"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" User Selection ")]),s("v-flex",{attrs:{"ma-3":""}},[s("v-combobox",{attrs:{items:e.users,"item-text":"userName","hide-selected":"",label:"Select user type"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),s("v-btn",{attrs:{large:"",block:"",color:"primary"},on:{click:e.assign}},[e._v("Assign User to route")])],1),s("v-card-text")],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},Ne=[],Se={data:function(){return{e1:0,select:null,selectedUser:null,dialogEditItem:!1,users:[],dialogloader:!1,nodeApi:"",selectedRoute:null,selectedItem:null,routes:[],addressData:[],editedIndex:-1}},watch:{dialogEditItem:function(e){e?this.getUsers():this.editedIndex=-1}},created:function(){},methods:{selectedRowItem:function(e){this.selectedItem=e.route;var t=JSON.parse(e.address);this.addressData=JSON.parse(t)},openAssigner:function(e){this.selectedRoute=e,this.selectedRoute.address=JSON.stringify(this.selectedRoute.address),this.dialogEditItem=!0},getUsers:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUsers",{headers:t}).subscribe((function(e){s.users=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assign:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getRoutes(),this.dialogEditItem=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRoutes:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},s=this.$jwt.sign({assignTo:this.selectedUser.id},"meterlink@@11",{expiresIn:15}),a={payload:s},O.a.post(this.nodeApi+"/getAllRoutesByUser",a,{headers:t}).subscribe((function(e){var t=r.$jwt.decode(e.data.token,{complete:!0});r.routes=t.payload.rows}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadRoutes:function(){this.getRoutes()},updateItem:function(){this.editedIndex>-1?(Object.assign(this.itemData[this.editedIndex],this.newItem),this.dialogEditItem=!1):(this.itemData.push({quantity:this.newItem.quantity,item:this.newItem.item,unitprice:this.newItem.unitprice}),this.dialogEditItem=!1)},editItem:function(e){this.editedIndex=this.itemData.indexOf(e),this.newItem=Object.assign({},e),this.dialogEditItem=!0},deleteItem:function(e){var t=this.routes.indexOf(e);this.routes.splice(t,1)}}},De=Se,Ve=(s("a0e8"),Object(l["a"])(De,Ce,Ne,!1,null,"96826196",null)),Te=Ve.exports;d()(Ve,{VBtn:B["a"],VCard:M["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:F["a"],VCombobox:J["a"],VDialog:G["a"],VFlex:W["a"],VIcon:q["a"],VLayout:X["a"],VProgressLinear:Y["a"],VRow:Z["a"],VSimpleTable:H["a"],VSpacer:K["a"]});var je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-flex",{attrs:{"ma-5":""}},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"3"}},[s("v-card",{staticClass:"mb-5",attrs:{"max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Uploaded Incidents "),s("v-spacer"),s("v-btn",{attrs:{color:"green",dark:""},on:{click:function(t){e.dialogEditItem=!0}}},[e._v("Select User")])],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left",attrs:{width:"10%"}},[e._v("ID")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("User")]),s("th",{staticClass:"text-left",attrs:{width:"30%"}},[e._v("Status")]),s("th",{staticClass:"text-left"},[e._v("Action")])])]),s("tbody",e._l(e.routes,(function(t){return s("tr",{key:t.routeId},[s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(" "+e._s(t.id)+" ")]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.userName))]),s("td",{on:{click:function(s){return e.selectedRowItem(t)}}},[e._v(e._s(t.statusName))]),s("td",[s("v-layout",{attrs:{row:""}},[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.deleteItem(t)}}},[s("v-icon",{attrs:{color:"red"}},[e._v("delete")])],1)],1)],1)])})),0)]},proxy:!0}])})],1)],1),s("v-col",{attrs:{cols:"12",md:"5"}},[s("v-card",{staticClass:"mb-12",attrs:{hover:"","max-height":"850"}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Incident List "),s("v-spacer")],1),s("v-simple-table",{attrs:{"fixed-header":"",height:"100%"},scopedSlots:e._u([{key:"default",fn:function(){return[s("thead",{staticStyle:{"overflow-y":"scroll","overflow-x":"hidden"}},[s("tr",[s("th",{staticClass:"text-left"},[e._v("Route")]),s("th",{staticClass:"text-left"},[e._v("Notes")]),s("th",{staticClass:"text-left"},[e._v("location")]),s("th",{staticClass:"text-left"},[e._v("Date Time")])])]),s("tbody",e._l(e.addressData,(function(t){return s("tr",{key:t.datetime,on:{click:function(s){return e.selectedIncident(t)}}},[s("td",[e._v(e._s(t.route))]),s("td",[e._v(e._s(t.note))]),s("td",[s("v-btn",{attrs:{icon:""},on:{click:function(s){return e.mapScreen(t)}}},[s("v-icon",{attrs:{color:"green"}},[e._v("location_on")])],1)],1),s("td",[e._v(e._s(new Date(t.datetime).toLocaleString("en-GB")))])])})),0)]},proxy:!0}])})],1)],1),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-card",{staticClass:"mb-12",attrs:{hover:""}},[s("v-card-title",{staticClass:"headline blue-grey lighten-1 white--text",attrs:{"primary-title":""}},[e._v(" Incident Image "),s("v-spacer")],1),s("v-img",{attrs:{src:e.imageData}})],1)],1)],1),s("v-dialog",{attrs:{width:"500"},model:{value:e.dialogEditItem,callback:function(t){e.dialogEditItem=t},expression:"dialogEditItem"}},[s("v-card",[s("v-card-title",{staticClass:"headline grey lighten-2",attrs:{"primary-title":""}},[e._v(" User Selection ")]),s("v-flex",{attrs:{"ma-3":""}},[s("v-combobox",{attrs:{items:e.users,"item-text":"userName","hide-selected":"",label:"Select user type"},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}),s("v-btn",{attrs:{large:"",block:"",color:"primary"},on:{click:e.assign}},[e._v("Assign User to route")])],1),s("v-card-text")],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1),s("v-dialog",{attrs:{fullscreen:"","hide-overlay":"",transition:"dialog-bottom-transition"},model:{value:e.dialogMap,callback:function(t){e.dialogMap=t},expression:"dialogMap"}},[s("v-card",[s("v-toolbar",{attrs:{dark:"",color:"#2B5563"}},[s("v-toolbar-title",[e._v("Addresses on routes")]),s("v-spacer"),s("v-toolbar-items",[s("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.dialogMap=!1}}},[e._v("Close")])],1)],1),s("v-flex",{attrs:{xs12:"",lg12:""}},[s("div",{staticClass:"map"},[s("MapScreen",{attrs:{mapData:e.geoData}})],1)])],1)],1)],1)},$e=[],Oe=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"adminmap"},[s("l-map",{attrs:{zoom:e.zoom,center:e.center}},[s("l-tile-layer",{attrs:{url:e.url,attribution:e.attribution}}),e._l(e.address,(function(t,a){return s("l-marker",{key:a,attrs:{"lat-lng":e.latlong(t.lat,t.log)}},[s("l-popup",{attrs:{content:"Title : <b>"+t.clientName+"</b><br>Notes &nbsp;&nbsp;: <b>"+t.address+" </b><br>Date &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <b>"+new Date(t.dateTime).toLocaleString("en-GB",{timeZone:"UTC"})+"</b>"}}),s("l-icon",{attrs:{"icon-size":e.iconSize,"icon-url":e.icon}})],1)}))],2)],1)},Ee=[],Le={components:{LMap:I["a"],LTileLayer:R["a"],LMarker:U["a"],LIcon:A["a"],LPopup:C["a"]},props:["mapData"],data:function(){return{zoom:8,center:L.latLng(-17.7954816,31.0222848),url:"https://tile.thunderforest.com/neighbourhood/{z}/{x}/{y}.png?apikey=130626f3c0ed4ca5865efcbbbe4334f8",attribution:'&copy; <a href="http://grebles.co.zw/copyright">Grebles Solutions</a>',marker:L.latLng(-17.7954816,31.0222848),icon:S.a,iconSize:[32,32],address:[]}},created:function(){this.address=this.mapData},watch:{mapData:{handler:function(e){e&&(this.address=this.mapData,console.log(this.address))},deep:!0}},methods:{latlong:function(e,t){return L.latLng(e,t)}}},Pe=Le,Be=(s("5bb5"),Object(l["a"])(Pe,Oe,Ee,!1,null,"43fed43c",null)),Me=Be.exports,ze={components:{MapScreen:Me},data:function(){return{e1:0,select:null,geoData:null,selectedUser:null,dialogEditItem:!1,users:[],dialogloader:!1,nodeApi:"",selectedRoute:null,selectedItem:null,routes:[],addressData:[],editedIndex:-1,imageData:"",dialogMap:!1}},watch:{dialogEditItem:function(e){e?this.getUsers():this.editedIndex=-1}},methods:{mapScreen:function(e){var t=[{lat:e.lat,log:e.log,dateTime:e.datetime,address:e.note,clientName:e.route}];this.geoData=t,this.dialogMap=!0},selectedIncident:function(e){this.imageData="data:image/png;base64,".concat(e.image)},selectedRowItem:function(e){this.addressData=JSON.parse(e.data)},openAssigner:function(e){this.selectedRoute=e,this.selectedRoute.address=JSON.stringify(this.selectedRoute.address),this.dialogEditItem=!0},getUsers:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},O.a.get(this.nodeApi+"/getAllUsers",{headers:t}).subscribe((function(e){s.users=e.data}),(function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assign:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.getRoutes(),this.dialogEditItem=!1;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getRoutes:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t={"Content-Type":"application/json",Authorization:"Bearer "+this.$session.get("user").token},s=this.$jwt.sign({assignTo:this.selectedUser.id},"meterlink@@11",{expiresIn:15}),a={payload:s},O.a.post(this.nodeApi+"/getAllIncidentsByUser",a,{headers:t}).subscribe((function(e){var t=r.$jwt.decode(e.data.token,{complete:!0});r.routes=t.payload.rows}),(function(e){return console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadRoutes:function(){this.getRoutes()},updateItem:function(){this.editedIndex>-1?(Object.assign(this.itemData[this.editedIndex],this.newItem),this.dialogEditItem=!1):(this.itemData.push({quantity:this.newItem.quantity,item:this.newItem.item,unitprice:this.newItem.unitprice}),this.dialogEditItem=!1)},editItem:function(e){this.editedIndex=this.itemData.indexOf(e),this.newItem=Object.assign({},e),this.dialogEditItem=!0},deleteItem:function(e){var t=this.routes.indexOf(e);this.routes.splice(t,1)}}},Fe=ze,Je=(s("3868"),s("adda")),Ge=Object(l["a"])(Fe,je,$e,!1,null,"532adaeb",null),We=Ge.exports;d()(Ge,{VBtn:B["a"],VCard:M["a"],VCardText:z["b"],VCardTitle:z["c"],VCol:F["a"],VCombobox:J["a"],VDialog:G["a"],VFlex:W["a"],VIcon:q["a"],VImg:Je["a"],VLayout:X["a"],VProgressLinear:Y["a"],VRow:Z["a"],VSimpleTable:H["a"],VSpacer:K["a"],VToolbar:ee["a"],VToolbarItems:te["a"],VToolbarTitle:te["b"]});var qe={name:"Dashboard",components:{home:ae,settings:be,managment:xe,maps:j,reading:Ae,installations:Te,incident:We},data:function(){return{fullname:"",meunSelected:"Route Assignment",page:""}},mounted:function(){this.page="home"},methods:{logout:function(){this.$router.push({name:"Login"}),this.$session.destroy()},menu:function(e,t){this.meunSelected=t,this.page="",this.page=e}}},Xe=qe,Ye=(s("d4bd"),s("7496")),Ze=s("40dc"),He=s("8212"),Ke=Object(l["a"])(Xe,g,b,!1,null,"63e9b103",null),Qe=Ke.exports;d()(Ke,{VApp:Ye["a"],VAppBar:Ze["a"],VAvatar:He["a"],VFlex:W["a"],VLayout:X["a"],VSpacer:K["a"],VToolbarTitle:te["b"],VTooltip:ve["a"]});var et=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-app",{staticClass:"main",attrs:{id:"inspire"}},[s("v-content",[s("v-container",{staticClass:"fill-height",attrs:{fluid:"","justify-center":""}},[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[s("v-card",{staticClass:"elevation-12"},[s("v-toolbar",{attrs:{color:"#2B5563",dark:"",flat:""}},[s("v-avatar",{staticClass:"mr-5",attrs:{color:"teal",size:"48"}},[s("img",{staticClass:"bounceIn",attrs:{src:"/images/logo.png",alt:"logo"}})]),s("v-toolbar-title",[e._v("Meter Link Admin System")]),s("v-spacer")],1),s("v-card-text",[s("v-form",[s("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"person",type:"text"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}}),s("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"lock",type:"password"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}},model:{value:e.passWord,callback:function(t){e.passWord=t},expression:"passWord"}})],1)],1),s("v-card-actions",[s("v-spacer"),s("v-btn",{attrs:{large:"",dark:"",color:"#2B5563"},on:{click:e.login}},[e._v("Login")])],1)],1)],1)],1)],1)],1),s("v-dialog",{attrs:{"hide-overlay":"",persistent:"",width:"300"},model:{value:e.dialogloader,callback:function(t){e.dialogloader=t},expression:"dialogloader"}},[s("v-card",{attrs:{color:"primary",dark:""}},[s("v-card-text",[s("br"),s("h3",[e._v("Please stand by")]),s("br"),s("v-progress-linear",{staticClass:"mb-0",attrs:{indeterminate:"",color:"white"}}),s("br")],1)],1)],1)],1)},tt=[],st={name:"Login",props:{source:String},data:function(){return{nodeApi:"",dialogloader:!1,userName:"",passWord:""}},methods:{login:function(){var e=Object(x["a"])(regeneratorRuntime.mark((function e(){var t,s,a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogloader=!0,t=this.$jwt.sign(this.passWord,"meterlink@@11"),console.log(t),s=this.$jwt.sign({userName:this.userName,password:t},"meterlink@@11",{expiresIn:15}),a={payload:s},e.next=7,O.a.post(this.nodeApi+"/loginUser",a).subscribe((function(e){if(e.data.token){r.dialogloader=!1;var t=r.$jwt.decode(e.data.token,{complete:!0});if(t.payload.rows.length>0){var s={token:e.data.token,userdetails:t.payload.rows[0]};r.$session.start(),r.$session.set("user",s),r.$router.push({name:"Dashboard"})}else r.dialogloader=!1,r.$swal.fire({type:"error",title:"Login Failure",text:"Sorry wrong username or password, please try again."})}else r.dialogloader=!1,r.$swal.fire({type:"error",title:"Login Failure",text:"API Authorization failure : "+e.data.message})}),(function(e){r.dialogloader=!1,r.$swal.fire({type:"error",title:"Login failed please try again",text:e})}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},at=st,rt=(s("b0ef"),s("a523")),it=s("4bd4"),nt=Object(l["a"])(at,et,tt,!1,null,"4ac9123b",null),ot=nt.exports;d()(nt,{VApp:Ye["a"],VAvatar:He["a"],VBtn:B["a"],VCard:M["a"],VCardActions:z["a"],VCardText:z["b"],VCol:F["a"],VContainer:rt["a"],VContent:u["a"],VDialog:G["a"],VForm:it["a"],VProgressLinear:Y["a"],VRow:Z["a"],VSpacer:K["a"],VTextField:Q["a"],VToolbar:ee["a"],VToolbarTitle:te["b"]}),a["a"].use(v["a"]);var lt=new v["a"]({routes:[{path:"/dashboard",name:"Dashboard",component:Qe},{path:"/",name:"Login",component:ot}]}),ct=s("5886"),dt=(s("4413"),s("0628")),ut=s.n(dt),pt=s("14b7"),ft=s.n(pt),ht=s("bf15"),mt=s("e11e");s("6cc5");Object.defineProperty(a["a"].prototype,"$jwt",{value:ft.a}),delete mt["Icon"].Default.prototype._getIconUrl,mt["Icon"].Default.mergeOptions({iconRetinaUrl:s("584d"),iconUrl:s("6397"),shadowUrl:s("e2b9")}),a["a"].use(ut.a),a["a"].use(ht["a"]),a["a"].use(ct["a"]),a["a"].config.productionTip=!1,new a["a"]({iconfont:"md",vuetify:m,router:lt,render:function(e){return e(f)}}).$mount("#app")},"5bb5":function(e,t,s){"use strict";var a=s("048c"),r=s.n(a);r.a},6:function(e,t){},"67c8":function(e,t,s){},7:function(e,t){},8:function(e,t){},"8a23":function(e,t,s){},"8d32":function(e,t,s){},9:function(e,t){},a0e8:function(e,t,s){"use strict";var a=s("49a6"),r=s.n(a);r.a},ad07:function(e,t,s){"use strict";var a=s("d6a8"),r=s.n(a);r.a},b0ef:function(e,t,s){"use strict";var a=s("de1a"),r=s.n(a);r.a},b49a:function(e,t,s){},b607:function(e,t,s){"use strict";var a=s("258b"),r=s.n(a);r.a},b771:function(e,t,s){"use strict";var a=s("b49a"),r=s.n(a);r.a},c34f:function(e,t,s){"use strict";var a=s("050e"),r=s.n(a);r.a},d4bd:function(e,t,s){"use strict";var a=s("67c8"),r=s.n(a);r.a},d6a8:function(e,t,s){},de1a:function(e,t,s){}});
//# sourceMappingURL=app.46eb1689.js.map